= Configure the operator

Now that the operator is installed, we need to set it up.

**Prerequisites**
To complete this section, it is mandatory to have all ARO credentials at hand, because they will have to be inserted in the various resources that we are going to create.

NOTE: All the below yaml files could be also created in the web UI by clicking on the **Import yaml** button in the top bar on the right.

image::05-bar.png[link=self, window=blank]

[#webui]
== Using the web interface
. In the OpenShift Container Platform web console, navigate to **Operators** > OperatorHub.

. In the **Filter by keyword field**, type `OpenShift sandboxed containers`.

. Click on the **OpenShift sandboxed containers Operator** tile.
+
image::01-operatorhub-ui.png[link=self, window=blank]

. On the **Install Operator** page, select **stable** from the list of available **Update Channel** options.
+
image::02-install-ui.png[link=self, window=blank]

. Verify that **Operator recommended Namespace** is selected for **Installed Namespace**. This installs the Operator in the mandatory openshift-sandboxed-containers-operator namespace. If this namespace does not yet exist, it is automatically created.

NOTE: Attempting to install the OpenShift sandboxed containers Operator in a namespace other than `openshift-sandboxed-containers-operator` causes the installation to fail.

. Verify that **Automatic** is selected for **Approval Strategy**. **Automatic** is the default value, and enables automatic updates to OpenShift sandboxed containers when a new z-stream release is available.

. Click **Install**.
+
image::03-install-ui.png[link=self, window=blank]

The OpenShift sandboxed containers Operator is now installed on your cluster.

=== Verification

. Navigate to **Operators > Installed Operators**.

. Verify that the OpenShift sandboxed containers Operator is displayed.
+
image::04-install-ui.png[link=self, window=blank]

[#cmdline]
== Using the command line

TIP: If you don't want to copy-paste, there is a xref:01-install-osc.adoc#scripts[script] that performs all the steps above automatically.

. Create and apply a `Namespace.yaml` manifest file:
+
[source,sh,role=execute]
----
echo "apiVersion: v1
kind: Namespace
metadata:
  name: openshift-sandboxed-containers-operator" > Namespace.yaml
----
+
[source,sh,role=execute]
----
oc apply -f Namespace.yaml
----

. Create and apply a `OperatorGroup.yaml` manifest file:
+
[source,sh,role=execute]
----
echo "apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: openshift-sandboxed-containers-operator
  namespace: openshift-sandboxed-containers-operator
spec:
  targetNamespaces:
  - openshift-sandboxed-containers-operator" > OperatorGroup.yaml
----
+
[source,sh,role=execute]
----
oc apply -f OperatorGroup.yaml
----

. Create and apply a `Subscription.yaml` manifest file:
+
[source,sh,role=execute]
----
echo "apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-sandboxed-containers-operator
  namespace: openshift-sandboxed-containers-operator
spec:
  channel: stable
  installPlanApproval: Automatic
  name: sandboxed-containers-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: sandboxed-containers-operator.v1.6.0" > Subscription.yaml
----
+
NOTE: You can change the operator version by changing the `startingCSV` field in the `Subscription.yaml` file.
+
[source,sh,role=execute]
----
oc apply -f Subscription.yaml
----

=== Verification
Ensure that the Operator is correctly installed by running the following command:
[source,sh,role=execute]
----
c get csv -n openshift-sandboxed-containers-operator
----

**Example output**
[source,texinfo,subs="attributes"]
----
NAME                             DISPLAY                                  VERSION             REPLACES                   PHASE
openshift-sandboxed-containers   openshift-sandboxed-containers-operator  1.6.0                                          Succeeded
----

[#scripts]
=== Scripted way
Avoid copy-pasting all steps above and do it in one step:
NOTE: You can change the operator version by changing the `startingCSV` field under the `Subscription` resource type.
[source,sh,role=execute]
----
oc apply -f-<<EOF
---
apiVersion: v1
kind: Namespace
metadata:
  name: openshift-sandboxed-containers-operator
---
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: openshift-sandboxed-containers-operator
  namespace: openshift-sandboxed-containers-operator
spec:
  targetNamespaces:
  - openshift-sandboxed-containers-operator
---
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: openshift-sandboxed-containers-operator
  namespace: openshift-sandboxed-containers-operator
spec:
  channel: stable
  installPlanApproval: Automatic
  name: sandboxed-containers-operator
  source: redhat-operators
  sourceNamespace: openshift-marketplace
  startingCSV: sandboxed-containers-operator.v1.6.0
EOF
----